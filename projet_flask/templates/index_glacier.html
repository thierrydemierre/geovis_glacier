<!DOCTYPE html>
<html>
<head>
  <title>Les glaciers suisses</title>
  <meta charset = "utf-8"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
  integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
  crossorigin=""></script>
  <script src="http://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>

    <link rel="stylesheet" href="/static/style.css"/>
  </head>
  <body>
    <!-- <select id="region" onchange= "show_glaciers()"> -->
      <!-- <option value= "" >Toutes les cabanes</option>
      <option value= "vs">Cabanes valaisannes</option>
      <option value= "gr">Cabanes grisonnes</option>
    </select> -->
    <div class = "main">
  <div id="map" class="glaciers"></div>
  <div id= "coordonnees">Coordonnées: déplacez la souris sur la carte</div>
  <div class="sidebar">
    <p class= "explication"> Cette carte permet d'avoir des informations sur les glaciers en Suisse</p>
    <div class="recherche">
      <select>
        <option value = ""> -- Sélection du paramètre -- </option>
      </select>
    </div>
    <div class="infobox">
      <table cellpadding= "3">
        <tr>
          <td><b>Cliquez sur un marqueur pour afficher les différents paramètres disponibles</b></td>
        </tr>
        <tr>
          <td>La différence de longueur est calculée en mètre sur une année de septembre à septembre.</td>
        </tr>
        <tr>
        <td>La différence de volume est calculée en km3 sur une durée pouvant alterner.</td>
      </tr>
      <tr>
        <td>L'équilibre de masse est calculé en milimètres w.e (water equivalent) sur une année de septembre à septembre.</td>
      </tr>

        </div>
            <div class= "copyright">
            2019 © Thierry Demierre
          </div>
        </div>

  <script src="/static/index_glacier.js"></script>
  <!-- insertion du D3 à cet endroit-->
<div id="graph_length" class= "graph">
  <script>
// //paramètres de base
//  var width = 600;
//  var height = 400;
//
//
//   const parseTime = d3.timeParse("%d/%m/%Y");
//   const dateFormat = d3.timeFormat("%d/%m/%Y");
//
//   //projection pour les axes
//   const x = d3.scaleTime()
//       .range([0, width]);
//
//   const y = d3.scaleLinear()
//       .range([height, 0]);
//
//   //fonction qui définira la courbe du graphique
//   const line = d3.line()
//       .x(function(d) { return x(d.date); })
//       .y(function(d) { return y(d.length); });
//       // création du svg
//   const svg = d3.select("#chart").append("svg")
//       .attr("id", "svg")
//       .attr("width", width)
//       .attr("height", height)
//       .append("g");
//
//       function f (){
//       var urlLength = '/datalength.json';
//         $.getJSON(urlLength, function(data){
//           for (var i=0; i <data.length; i++){
//             var datalength = data[i];
//           }
//             console.log(data);
//         })
//
//       f();
//       data.forEach(function(d) {
//           d.date = parseTime(d.start_date_length);
//           d.length = +d.longueur;
//           map[d.date] = d; // sauvegarde sous forme de hashmap de nos données.
//       });
//
//
//       // Contrairement au tutoriel Bar Chart, plutôt que de prendre un range entre 0 et le max on demande
//       // directement à D3JS de nous donner le min et le max avec la fonction 'd3.extent', pour la date comme
//       // pour le cours de fermeture (close).
//       x.domain(d3.extent(data, function(d) { return d.date; }));
//       y.domain(d3.extent(data, function(d) { return d.length; }));
//
//       // Ajout de l'axe X
//       svg.append("g")
//           .attr("transform", "translate(0," + height + ")")
//           .call(d3.axisBottom(x));
//
//       // Ajout de l'axe Y et du texte associé pour la légende
//       svg.append("g")
//           .call(d3.axisLeft(y))
//           .append("text")
//               .attr("fill", "#000")
//               .attr("transform", "rotate(-90)")
//               .attr("y", 6)
//               .attr("dy", "0.71em")
//               .style("text-anchor", "end")
//               .text("Pts");
//
//       // Ajout de la grille horizontale (pour l'axe Y donc). Pour chaque tiret (ticks), on ajoute une ligne qui va
//       // de la gauche à la droite du graphique et qui se situe à la bonne hauteur.
//       svg.selectAll("y axis").data(y.ticks(10)).enter()
//           .append("line")
//           .attr("class", "horizontalGrid")
//           .attr("x1", 0)
//           .attr("x2", width)
//           .attr("y1", function(d){ return y(d);})
//           .attr("y2", function(d){ return y(d);});
//
//       // Ajout d'un path calculé par la fonction line à partir des données de notre fichier.
//       svg.append("path")
//           .datum(data)
//           .attr("class", "line")
//           .attr("d", line);
//   };


  </script>
</div>

   <!-- <script src="/static/graph_glacier.js"></script> -->
    </body>
    </html>
